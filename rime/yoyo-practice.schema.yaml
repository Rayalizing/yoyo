# Rime schema - 麓鸣-练习字根
schema:
  author:
    - Rayalizing
  description: |
    麓鸣，6638字【零重码】的、字词通打、最长三码、一击顶功、极致性能的【纯形】并击输入方案,
    内置两种功法和最强指法折梅，酌情选修。
  name: "麓鸣·练习字根"
  schema_id: yoyo-practice
  version: 1.0

#=============================== 
内功心法:
  __include: 北冥神功  # 段誉所赠，逍遥派绝学。
                      # > 逍遥武功，以积蓄内力为第一要义；内力既厚，犹之北冥，天下武功无不为我所用
                      # 打法：并击主单
                        # 1. 双手并击时，出单字前两码，若同时打空格，则出词的前两码；
                        # 2. 单字第三码（单字全码均为三码）由单手加空格打出，左手加空格打出⿰和⿺结构的字，右手加空格打出其他结构字；
                        # 3. 该功法主单字，多字词只能【左右并击加空格】打出，四码定长，两次并击后自动顶屏；
                        # 4. 单手无空格打字，直出一简字/词，左右手虽指法对称，但所出一简不同，故可出字和词各120个。
指法:
  __include: yoyo:/折梅  # 逍遥派核心武学，六路折梅手包罗万有，可化用天下武功招数。
#=============================== 

__include: yoyo:/
__patch:
  translator/dictionary: yoyo-practice
  translator/prism: yoyo-practice
  chord_composer:
    alphabet: "12345qwertasdfgzxcvb 67890yuiophjkl;nm,./"
    prompt_format:  # 并击过程中套用的式样
      - xform/\[(..)\]/$1/g
      - xform/\((..)\)/$1/g
      - xform/[-=_+]//g
    output_format:  # 并击完成后套用的式样
      - xform|^[-=_+]([0-9a-zA-Z;:,<.>/?]+)$|$1|  # 还原
      - xform|^[[(]([0-9a-zA-Z;:,<.>/?]+)[])]$|$1|
    algebra:
      __patch:
        - 内功心法
        - 指法

  speller:
    auto_clear: max_length # 3种选择， manual|auto|max_length 空码按下一键确认清屏|空码自动清|达到最长码时后码顶上清屏
    max_code_length: 4
    alphabet: ""
    initials: ""
    # auto_select: true
    # auto_select_pattern: "'.+"  # 快符，候选唯一则顶屏
    # algebra:
    #   # 处理词编码(第一击由并击打出则为词)
    #   - xform|^([a-zA-Z;:,<.>/?]{2})([a-zA-Z;:,<.>/?]*)$|($1)$2|
    #   - derive|^(\([a-zA-Z;:,<.>/?]{2}\))([a-zA-Z;:,<.>/?]{2})$|$1($2)|
    #   # 处理第一击之后的词编码（确保后续编码可以由串击或并击打出）
    #   - derive|^(\([a-zA-Z;:,<.>/?]{2}\))([a-zA-Z;:,<.>/?])|$1-$2|
    #   - derive|^(\([a-zA-Z;:,<.>/?]{2}\))([a-zA-Z;:,<.>/?])|$1=$2|
    #   - derive|^(\([a-zA-Z;:,<.>/?]{2}\)[-=][a-zA-Z;:,<.>/?])([a-zA-Z;:,<.>/?])$|$1-$2|
    #   - derive|^(\([a-zA-Z;:,<.>/?]{2}\)[-=][a-zA-Z;:,<.>/?])([a-zA-Z;:,<.>/?])$|$1=$2|
    # popping:  # accept无法识别多个按键！
    #   - match: "[^']+"  
    #     accept: "[_+]"  # 任意按键（除'外）下，一简字词打出则顶屏
    #   - match: "[_+][a-zA-Z;:,<.>/?]"
    #     accept: "[^0-9 ']"  # 一简字词打出后, 打出任意非 数字 空格 ' 的字符则顶屏
    #   - match: "[[][a-zA-Z;:,<.>/?]{2}[]]"
    #     accept: "[[(]"  # 已有单字前两码, 打出 [ ( 字符则顶屏
    #   - match: "[(][a-zA-Z;:,<.>/?]{2}[)]"
    #     accept: "[[]"  # 已有词前两码, 打出 [ 字符则顶屏
    #   - match: "[[][a-zA-Z;:,<.>/?]{2}[]][-=][a-zA-Z;:,<.>/?]"
    #     accept: "[^0-9 ']"  # 已有单字前三码，打出任意非 数字 空格 ' 的字符则顶屏
    #   - match: (\([a-zA-Z;:,<.>/?]{2}\)){2} 
    #     accept: "[^0-9 ']"  # 带空格并击两次(已有词全码)，打出任意非 数字 空格 ' 的字符则顶屏


北冥神功:
  __append:
    # 将左右手（无空格）的按键组合：转换为  [左右]  的格式——打单字
    - xform|^([12345qwertasdfgzxcvb]+)([67890yuiophjkl;nm,./]+)$|[$1'$2]|
    # - xform|^(?=.*[12345qwertasdfgzxcvb])(?=.*[67890yuiophjkl;nm,./])([0-9a-z;,./]+)$|[$1]|
    
    # 将左右手（带空格）的按键组合：转换为  (左右)  的格式——打词
    - xform|^(?=.*[12345qwertasdfgzxcvb])(?=.*[67890yuiophjkl;nm,./])([0-9a-z;,./]*) ([0-9a-z;,./]*)$|($1$2)|  # 这里的 “(?=.*[12345qwertasdfgzxcvb])” 是”正向预查“：用于确保左手至少有一个按键。
    - xform|^(\([12345qwertasdfgzxcvb]+)([67890yuiophjkl;nm,./]+\))|$1'$2|
    
    # 单手带空格：
    - xform|^(?=.*[12345qwertasdfgzxcvb])([12345qwertasdfgzxcvb]*) ([12345qwertasdfgzxcvb]*)$|-$1$2|  # 将左手1到多个按键(带空格)转换为  -左  的格式 (用于打单字第三码，词的第三码、第四码)
    - xform|^(?=.*[67890yuiophjkl;nm,./])([67890yuiophjkl;nm,./]*) ([67890yuiophjkl;nm,./]*)$|=$1$2|  # 将右手1到多个按键(带空格)转换为  =右  的格式 (用于打单字第三码，词的第三码、第四码)

    # 单手不带空格：
    - xform|^([12345qwertasdfgzxcvb]+)$|_$1|       # 将左手1到多个按键(不带空格)转换为  _左  的格式 (用于打一简字/词)
    - xform|^([67890yuiophjkl;nm,./]+)$|+$1|       # 将右手1到多个按键(不带空格)转换为  +右  的格式 (用于打一简字/词)

